(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{42:function(e,t,a){e.exports=a(66)},52:function(e,t,a){},60:function(e,t,a){},66:function(e,t,a){"use strict";a.r(t);a(43);var n=a(0),r=a.n(n),o=a(10),c=a.n(o),l=a(5),u=a(13),s=(a(52),a(11)),i=a(12),h=(a(53),function(e){return r.a.createElement("div",{className:"jumbotron"},r.a.createElement("h1",null,"Pluralsight Administration"),r.a.createElement("p",null,"React, Redux and React Router for ultra-responsive web apps."),r.a.createElement(l.b,{to:"about",className:"btn btn-primary btn-lg"},"Learn more"))}),m=function(e){return r.a.createElement("div",null,r.a.createElement("h2",null,"About"),r.a.createElement("p",null,"This app uses React, Redux, React Router, and many other helpful libraries."))},d=function(e){var t={color:"#F15B2A"};return r.a.createElement("nav",null,r.a.createElement(l.c,{to:"/",activeStyle:t,exact:!0},"Home")," | ",r.a.createElement(l.c,{to:"/courses",activeStyle:t},"Courses")," | ",r.a.createElement(l.c,{to:"/about",activeStyle:t},"About"))},f=function(e){return r.a.createElement("h1",null,"Oops! Page not found.")},p=a(9),E=a(30),b=a(31),v=a(40),g=a(32),C=a(41),y="CREATE_COURSE_SUCCESS",O="UPDATE_COURSE_SUCCESS",S="LOAD_COURSES_SUCCESS",A="LOAD_AUTHORS_SUCCESS",j="BEGIN_API_CALL",N="API_CALL_ERROR",P="DELETE_COURSE_OPTIMISTIC",_=a(24),I=a.n(_),R=a(33);function w(e){return L.apply(this,arguments)}function L(){return(L=Object(R.a)(I.a.mark(function e(t){var a;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=2;break}return e.abrupt("return",t.json());case 2:if(400!==t.status){e.next=7;break}return e.next=5,t.text();case 5:throw a=e.sent,new Error(a);case 7:throw new Error("Network response was not ok.");case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function T(e){throw console.error("API call failed. "+e),e}var U=Object({NODE_ENV:"production",PUBLIC_URL:"/pluralsight-cms-demo"}).REACT_APP_API_URL+"/courses/";function k(){return{type:j}}function D(){return{type:N}}function x(){return function(e){return e(k()),fetch(U).then(w).catch(T).then(function(t){e(function(e){return{type:S,payload:e}}(t))}).catch(function(t){throw e(D()),t})}}var B=Object({NODE_ENV:"production",PUBLIC_URL:"/pluralsight-cms-demo"}).REACT_APP_API_URL+"/authors/";function F(){return function(e){return e(k()),fetch(B).then(w).catch(T).then(function(t){e(function(e){return{type:A,payload:e}}(t))}).catch(function(t){throw e(D()),t})}}var q=function(e){var t=e.courses,a=e.onDeleteClick;return r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null),r.a.createElement("th",null,"Title"),r.a.createElement("th",null,"Author"),r.a.createElement("th",null,"Category"),r.a.createElement("th",null))),r.a.createElement("tbody",null,t.map(function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,r.a.createElement("a",{className:"btn btn-light",href:"http://pluralsight.com/courses"+e.slug},"Watch")),r.a.createElement("td",null,r.a.createElement(l.b,{to:"/course/"+e.slug},e.title)),r.a.createElement("td",null,e.authorName),r.a.createElement("td",null,e.category),r.a.createElement("td",null,r.a.createElement("button",{className:"btn btn-outline-danger",onClick:function(){return a(e)}},"Delete")))})))},J=(a(60),function(e){return r.a.createElement("div",{className:"loader"},"Loading...")}),H=function(e){function t(){var e,a;Object(E.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(v.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={redirectToAddCoursePage:!1},a.handleDeleteCourse=function(e){i.b.success("Course deleted."),a.props.deleteCourse(e).catch(function(e){i.b.error("Delete failed. "+e.message,{autoClose:!1})})},a}return Object(C.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.courses,a=e.authors,n=e.loadAuthors,r=e.loadCourses;0===t.length&&r().catch(function(e){alert("Loading courses failed "+e)}),0===a.length&&n().catch(function(e){alert("Loading authors failed "+e)})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,this.state.redirectToAddCoursePage&&r.a.createElement(s.a,{to:"/course"}),r.a.createElement("h2",null,"Courses"),this.props.loading?r.a.createElement(J,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{style:{marginBottom:20},className:"btn btn-primary add-course",onClick:function(){return e.setState({redirectToAddCoursePage:!0})}},"Add Course"),r.a.createElement(q,{courses:this.props.courses,onDeleteClick:this.handleDeleteCourse})))}}]),t}(n.Component);var M={loadCourses:x,loadAuthors:F,deleteCourse:function(e){return function(t){return t(function(e){return{type:P,payload:e}}(e)),a=e.id,fetch(U+a,{method:"DELETE"}).then(w).catch(T);var a}}},V=Object(u.b)(function(e){return{courses:0===e.authors.length?[]:e.courses.map(function(t){return Object(p.a)({},t,{authorName:e.authors.find(function(e){return e.id===t.authorId}).name})}),authors:e.authors,loading:e.apiCallsInProgress>0}},M)(H),G=a(19),W=a(20),z=a(36),K=function(e){var t=e.name,a=e.label,n=e.onChange,o=e.placeholder,c=e.value,l=e.error,u="form-group ";return l&&l.length>0&&(u+="has-error"),r.a.createElement("div",{className:u},r.a.createElement("label",{htmlFor:t},a),r.a.createElement("div",{className:"field"},r.a.createElement("input",{type:"text",name:t,className:"form-control",placeholder:o,value:c,onChange:n}),l&&r.a.createElement("div",{className:"alert alert-danger"},l)))},Q=function(e){var t=e.name,a=e.label,n=e.onChange,o=e.defaultOption,c=e.value,l=e.error,u=e.options;return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:t},a),r.a.createElement("div",{className:"field"},r.a.createElement("select",{name:t,value:c,onChange:n,className:"form-control"},r.a.createElement("option",{value:""},o),u.map(function(e){return r.a.createElement("option",{key:e.value,value:e.value},e.text)})),l&&r.a.createElement("div",{className:"alert alert-danger"},l)))},X=function(e){var t=e.course,a=e.authors,n=e.onSave,o=e.onChange,c=e.saving,l=void 0!==c&&c,u=e.errors,s=void 0===u?{}:u;return r.a.createElement("form",{onSubmit:n},r.a.createElement("h2",null,t.id?"Edit":"Add"," Course"),s.onSave&&r.a.createElement("div",{className:"alert alert-danger",role:"alert"},s.onSave),r.a.createElement(K,{name:"title",label:"Title",value:t.title,onChange:o,error:s.title}),r.a.createElement(Q,{name:"authorId",label:"Author",value:t.authorId||"",defaultOption:"Select Author",options:a.map(function(e){return{value:e.id,text:e.name}}),onChange:o,error:s.author}),r.a.createElement(K,{name:"category",label:"Category",value:t.category,onChange:o,error:s.category}),r.a.createElement("button",{type:"submit",disabled:l,className:"btn btn-primary"},l?"Saving...":"Save"))},Y={id:null,title:"",authorId:null,category:""};var Z={loadCourses:x,saveCourse:function(e){return function(t){return t(k()),function(e){return fetch(U+(e.id||""),{method:e.id?"PUT":"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then(w).catch(T)}(e).then(function(a){e.id?t(function(e){return{type:O,payload:e}}(a)):t(function(e){return{type:y,payload:e}}(a))}).catch(function(e){throw t(D()),e})}},loadAuthors:F},$=Object(u.b)(function(e,t){var a=t.match.params.slug;return{course:a&&e.courses.length>0?function(e,t){return e.find(function(e){return e.slug===t})||null}(e.courses,a):Y,courses:e.courses,authors:e.authors}},Z)(function(e){var t=e.courses,a=e.authors,o=e.loadAuthors,c=e.loadCourses,l=e.saveCourse,u=e.history,s=Object(z.a)(e,["courses","authors","loadAuthors","loadCourses","saveCourse","history"]),h=Object(n.useState)(Object(p.a)({},s.course)),m=Object(W.a)(h,2),d=m[0],f=m[1],E=Object(n.useState)({}),b=Object(W.a)(E,2),v=b[0],g=b[1],C=Object(n.useState)(!1),y=Object(W.a)(C,2),O=y[0],S=y[1];return Object(n.useEffect)(function(){0===t.length?c().catch(function(e){alert("Loading courses failed "+e)}):f(Object(p.a)({},s.course)),0===a.length&&o().catch(function(e){alert("Loading authors failed "+e)})},[s.course]),0===a.length||0===t.length?r.a.createElement(J,null):r.a.createElement(X,{course:d,authors:a,onSave:function(e){e.preventDefault(),function(){var e=d.title,t=d.authorId,a=d.category,n={};return e||(n.title="Title is required."),t||(n.author="Author is required."),a||(n.category="Category is required."),g(n),0===Object.keys(n).length}()&&(S(!0),l(d).then(function(){i.b.success("Course saved."),u.push("/courses")}).catch(function(e){S(!1),g({onSave:e.message})}))},onChange:function(e){var t=e.target,a=t.name,n=t.value;f(function(e){return Object(p.a)({},e,Object(G.a)({},a,"authorId"===a?parseInt(n,10):n))})},saving:O,errors:v})});var ee=function(e){return r.a.createElement("div",{className:"container-fluid"},r.a.createElement(d,null),r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:"/",component:h}),r.a.createElement(s.b,{path:"/about",component:m}),r.a.createElement(s.b,{path:"/courses",component:V}),r.a.createElement(s.b,{path:"/course/:slug",component:$}),r.a.createElement(s.b,{path:"/course",component:$}),r.a.createElement(s.b,{component:f})),r.a.createElement(i.a,{autoClose:3e3,hideProgressBar:!0}))},te=a(8),ae=a(37),ne=a(38),re=a.n(ne),oe=a(39),ce={courses:[],authors:[],apiCallsInProgress:0};var le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce.courses,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return[].concat(Object(oe.a)(e),[Object(p.a)({},t.payload)]);case O:return e.map(function(e){return e.id===t.payload.id?t.payload:e});case S:return t.payload;case P:return e.filter(function(e){return e.id!==t.payload.id});default:return e}};var ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce.authors,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A:return t.payload;default:return e}};var se=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce.apiCallsInProgress,a=arguments.length>1?arguments[1]:void 0;return a.type===j?t+1:a.type===N||"_SUCCESS"===(e=a.type).substring(e.length-8)?t-1:t},ie=Object(te.c)({courses:le,authors:ue,apiCallsInProgress:se});var he=function(e){var t=te.d;return Object(te.e)(ie,e,t(Object(te.a)(ae.a,re()())))}();c.a.render(r.a.createElement(u.a,{store:he},r.a.createElement(l.a,null,r.a.createElement(ee,null))),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.0ffd50f4.chunk.js.map